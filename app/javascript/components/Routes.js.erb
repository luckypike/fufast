/* rails-erb-loader-dependencies ../config/routes.rb */

import React, { Component } from 'react'
import pathToRegexp from 'path-to-regexp'
import querystring from 'querystring'

const Routes = <%= Rails.application.routes.routes.reject{ |route| ['rails/info', 'rails/mailers', nil].include?(route.defaults[:controller])}.select(&:name).map{ |route| ["#{route.name}_path", route.path.spec.to_s.gsub('(.:format)', '.:format?').gsub(/\((\/:.+)\)/, '\1?')] }.to_h.to_json %>

const path = (route, params = {}, json = false) => {
  const { hash, query, ...attr } = params
  let r = Routes[route]
  if(!r) return null
  const generatePath = pathToRegexp.compile(r)
  return generatePath(attr) + (query ? `?${querystring.stringify(query)}` : '');
}

export { Routes, path }
